<!DOCTYPE html>
<html lang="ID">

<head>
    <!-- Meta Tags -->
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1"> -->
    <meta name="name" content="Budidi Adidi">
    <!-- Site Title -->
    <title>Quotes Generator</title>
    <link rel="stylesheet" href="css/style.new.css">
    <link rel="stylesheet" href="css/padding.css">
    <link rel="stylesheet" href="css/metric.css">
    <link rel="shortcut icon" id="icon" href="image/favicon.png" />
    <link href=" https://fonts.googleapis.com/css?family=Noto Naskh Arabic" rel='stylesheet'>
    <style>
        .invoice {
            /* background-image: url('https://picsum.photos/2400/3600'); */
            padding: 50px;
            display: grid;
            align-content: center;
            background-color: #007785;
        }

        .text-inter {
            text-align: justify;
            text-justify: inter-word;
        }

        .m-50 {
            margin: 50px;
        }

        .shape_1 {
            padding: 25px 20px;
            border-radius: 40px;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
            -webkit-backdrop-filter: blur(4px);
            backdrop-filter: blur(16px);
            background-color: #ffffff1a;
            border: 2px solid rgb(145, 145, 145, 0.20);
        }

        .arabic {
            line-height: 40px;
            font-family: 'Noto Naskh Arabic';
            font-size: 28px;
        }

        .footer {
            align-self: center;
            bottom: 22px;
            position: fixed;
            width: calc(100% - 39px);
        }

        .footer-logo {
            top: 760px;
            position: absolute;
            width: 117px;
            left: 50%;
            transform: translateX(-50%) translateY(50%);
        }

        .shadow {
            box-shadow: 0px 0px 40px 0px rgb(47 49 50 / 70%);
        }

        .form-group {
            align-items: center;
            display: flex;
            margin-bottom: 8px;
        }

        .form-control {
            margin-left: 10px;
            width: 70px;
            padding: .7rem .5rem;
            border: 1px solid #ced4da;
            border-radius: 11px;
        }

        [type="checkbox"],
        [type="radio"] {
            width: 25px;
            height: 25px;
        }

        .text-color {
            color: white;
        }

        .tookit {
            width: 100%;
        }

        .box {
            position: absolute;
            width: 600px;
            height: 600px;
            top: 100px;
            left: 0px;
            border: solid 1px aqua;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="invoice_wrap mb40">
            <div class="invoice type3" id="download_section">
                <div class="shape_1 text_center mb-4" id="titleCard">
                    <h4 class="text-color mb0" contenteditable="true" id="titleLatin">Allah murka kpeada orang yang berbuat dhalim kepada orang yang
                        tidak
                        memiliki penolong</h4>
                </div>
                <div class="shape_1 text_center mb15">
                    <h3 class="text-color arabic text_center" contenteditable="true" id="bodyArabic">
                        عَنْ عَلِيّ رض قَالَ: قَالَ رَسُوْلُ اللهِ ص: يَقُوْلُ اللهُ: اِشْتَدَّ غَضَبِى عَلَى
                        مَنْ
                        ظَلَمَ مَنْ لاَ يَجِدُ لَهُ نَاصِرًا غَيْرِى. الطبرانى فى الصغير و الاوسط، فى الترغيب و الترهيب 3: 188
                    </h3>
                    <h4 class="text-color text-inter mb10" contenteditable="true" id="bodyLatin">
                        Dari Ali RA, ia berkata : Rasulullah SAW pernah bersabda : Allah berfirman,"Aksabda : Allah berfirman, "Aku sangat murka
                        kepada orang yang
                        berbuat
                        dhalim terhadap orang lain yang orang itu tidak mempunyai penolong selain Aku".
                    </h4>
                    <div class="text_center ">
                        <h5 class="text-color mb0" id="footHead" contenteditable="true"><b>HR. Thabrani</b></h5>
                        <small class="text-color" id="footNote" contenteditable="true">di dalam Ash-Shaghir dan Al-Ausath, dalam Tarhib wat Tarhib juz
                            3, hal. 188</small>
                    </div>
                </div>
                <div class="footer-logo">
                    <img src="image/logo.png" alt="">
                </div>
            </div>
            <div class="box" style="display: none;"></div>
            <div class="invoice_btns hide_print w-100" id="buttons">
                <div class="shadow padd_8_20 w-100">
                    <div class="type3" id="download_section" contenteditable="false">
                        <table>
                            <tr>
                                <td class="w-25">Title</td>
                                <td>
                                    <div class="form-group mt-2">
                                        <label for="titleFontSize">Size</label>
                                        <input type="number" id="titleFont" class="form-control" placeholder="Enter Font Size">
                                    </div>
                                </td>
                                <td>
                                    <div class="form-group">
                                        <label for="titleEdit">Edit</label>
                                        <input type="checkbox" id="titleEdit" class="form-control" checked>
                                        <label class="ml-2 invoice_btn color2 hide" data-id="#titleCard">
                                            <span class="btn_text">Hide</span>
                                        </label>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>Arabic</td>
                                <td>
                                    <div class="form-group  mt-2">
                                        <label for="fontSize">Size</label>
                                        <input type="number" id="bodyArabicFont" class="form-control" placeholder="Enter Font Size">
                                    </div>
                                </td>
                                <td>
                                    <div class="form-group">
                                        <label for="bodyArabicEdit">Edit</label>
                                        <input type="checkbox" id="bodyArabicEdit" class="form-control" checked>
                                        <label class="ml-2 invoice_btn color2 hide" data-id="#bodyArabic">
                                            <span class="btn_text">Hide</span>
                                        </label>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>Body</td>
                                <td>
                                    <div class="form-group mt-2">
                                        <label for="fontSize">Size</label>
                                        <input type="number" id="bodyLatinFont" class="form-control" placeholder="Enter Font Size">
                                    </div>
                                </td>
                                <td>
                                    <div class="form-group">
                                        <label for="bodyLatinEdit">Edit</label>
                                        <input type="checkbox" id="bodyLatinEdit" class="form-control" checked>
                                        <label class="ml-2 invoice_btn color2 hide" data-id="#bodyLatin">
                                            <span class="btn_text">Hide</span>
                                        </label>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>Foot Head</td>
                                <td>
                                    <div class="form-group mt-2">
                                        <label for="footHeadFont">Size</label>
                                        <input type="number" id="footHeadFont" class="form-control" placeholder="Enter Font Size">
                                    </div>
                                </td>
                                <td>
                                    <div class="form-group">
                                        <label for="footHeadLatinEdit">Edit</label>
                                        <input type="checkbox" id="footHeadLatinEdit" class="form-control" checked>
                                        <label class="ml-2 invoice_btn color2 hide" data-id="#footHead">
                                            <span class="btn_text">Hide</span>
                                        </label>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>Foot Note</td>
                                <td>
                                    <div class="form-group mt-2">
                                        <label for="footNoteFont">Size</label>
                                        <input type="number" id="footNoteFont" class="form-control" placeholder="Enter Font Size">
                                    </div>
                                </td>
                                <td>
                                    <div class="form-group my-2">
                                        <label for="footNoteLatinEdit">Edit</label>
                                        <input type="checkbox" id="footNoteLatinEdit" class="form-control" checked>
                                        <label class="ml-2 invoice_btn color2 hide" data-id="#footNote">
                                            <span class="btn_text">Hide</span>
                                        </label>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>Background</td>
                                <td>
                                    <label for="upload" class="my-2 invoice_btn color1">
                                        <span class="btn_text">Upload</span>
                                    </label>
                                    <input type="file" id="upload" accept="image/*" style="display: none;">
                                    <label class="ml-2 invoice_btn color2" id="generateBackground" title="Generate Background Image">
                                        <span class="btn_text">↻</span>
                                    </label>
                                    <label class="ml-2 my-2 invoice_btn color1" id="download" title="Download current background image">
                                        <span class="btn_text">↓</span>
                                    </label>
                                    <label class="ml-2 my-2 invoice_btn color3" id="remove" title="Remove Background Image">
                                        <span class="btn_text">✖</span>
                                    </label>
                                </td>
                                <td>
                                    <div class="fowm-group my-2">
                                        <label for="BGColor" class="mr-1">Color</label>
                                        <input type="text" id="BGColor" class="form-control" />
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>Card</td>
                                <td>
                                    <div class="fowm-group my-2">
                                        <label for="CardColor" class="mr-1">Color</label>
                                        <input type="text" id="CardColor" class="form-control" />
                                    </div>
                                </td>
                                <td>
                                    <div class="fowm-group mt-2">
                                        <label for="TextColor" class="mr-1">Text</label>
                                        <input type="text" id="TextColor" class="form-control" />
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                <!-- <a id="print-pdf" class="invoice_btn color1"> 
                    <span class="btn_text">Cetak</span>
                </a> 
                <label for="upload" class="invoice_btn color1">
                    <span class="btn_text">Background</span>
                </label>
                <input type="file" id="upload" accept="image/*" style="display: none;">
                 
                <a id="download-pdf" class="invoice_btn color1"> 
                    <span class="btn_text">Unduh PDF</span>
                </a>
                <a id="download-image" class="invoice_btn color2"> 
                    <span class="btn_text">Unduh Gambar</span>
                </a>
                <a id="generate-image" class="invoice_btn color3"> 
                    <span class="btn_text">Generate Gambar</span>
                </a>
                <a id="refresh" class="d_none invoice_btn color3" href=""> 
                    <span class="btn_text">Refresh Halaman</span>
                </a> -->
            </div>
            <div class="d_none invoice_btns hide_print" id="loader">
                <a class="invoice_btn color1">
                    <span class="padd_15">
                        LOADING
                    </span>
                </a>
            </div>
        </div>

    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.4.0/jspdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/spectrum/1.8.1/spectrum.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/spectrum/1.8.1/spectrum.min.css">
    <script src="js/export-html.js"></script>
    <script>
        $(document).ready(function () {

            //Remove Elemenet
            $('.hide').on('click', function () {
                target = $(this).attr("data-id");
                $(target).toggle();
                $(this).toggleClass('color2 color3');
            });
            $('#generateBackground').click(function () {
                var randomTime = new Date().getTime(); // Generate a random number to ensure a new image each time
                $('.invoice').css('background-image', "url('https://picsum.photos/2400/3600?" + randomTime + "')");
            });

            $('#BGColor').spectrum({
                color: 'rgb(255 255 255 / 10%)',
                showAlpha: true,
                move: function (color) {
                    console.log('change');
                    $(".invoice").css(
                        "background-color",
                        color.toRgbString());
                },
            });
            $('#CardColor').spectrum({
                color: 'rgb(255 255 255 / 10%)',
                showAlpha: true,
                move: function (color) {
                    console.log('change');
                    $(".shape_1").css(
                        "background-color",
                        color.toRgbString());
                },
            });
            $('#TextColor').spectrum({
                color: 'rgb(255 255 255)',
                showAlpha: true,
                move: function (color) {
                    console.log('change');
                    $(".text-color").css(
                        "color",
                        color.toRgbString());
                },
            });

            //contenteditable tooggle
            $('#titleEdit, #bodyArabicEdit, #bodyLatinEdit, #footHeadLatinEdit, #footNoteLatinEdit').on('change', function () {
                var titleEdit = $('#titleEdit').is(':checked');
                var bodyArabicEdit = $('#bodyArabicEdit').is(':checked');
                var bodyLatinEdit = $('#bodyLatinEdit').is(':checked');
                var footHeadLatinEdit = $('#footHeadLatinEdit').is(':checked');
                var footNoteLatinEdit = $('#footNoteLatinEdit').is(':checked');
                $('#titleLatin').prop('contenteditable', titleEdit);
                $('#bodyArabic').prop('contenteditable', bodyArabicEdit);
                $('#bodyLatin').prop('contenteditable', bodyLatinEdit);
                $('#footHead').prop('contenteditable', footHeadLatinEdit);
                $('#footNote').prop('contenteditable', footNoteLatinEdit);
            });

            // font size
            var titleFont = parseFloat($('#titleLatin').css('font-size'));
            var bodyLatinFont = parseFloat($('#bodyLatin').css('font-size'));
            var bodyArabicFont = parseFloat($('#bodyArabic').css('font-size'));
            var footHeadFont = parseFloat($('#footHead').css('font-size'));
            var footNoteFont = parseFloat($('#footNote').css('font-size'));
            $('#titleFont').val(titleFont);
            $('#bodyLatinFont').val(bodyLatinFont);
            $('#bodyArabicFont').val(bodyArabicFont);
            $('#footHeadFont').val(footHeadFont);
            $('#footNoteFont').val(footNoteFont);

            $('#titleFont, #bodyLatinFont, #bodyArabicFont, #footHeadFont').on('input', function () {
                $('#titleLatin').css('font-size', $('#titleFont').val() + 'px');
                $('#bodyLatin').css('font-size', $('#bodyLatinFont').val() + 'px');
                $('#bodyArabic').css('font-size', $('#bodyArabicFont').val() + 'px');
                $('#footHead').css('font-size', $('#footHeadFont').val() + 'px');
            });


            $('#upload').on('change', function (event) {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function (e) {
                        $('#download_section').css('background-image', `url(${e.target.result})`);
                    }
                    reader.readAsDataURL(file);
                }
            });

            $('#bgPosX').on('input', function () {
                const bgPosX = $('#bgPosX').val() + 'px';
                $('.container').css({
                    'background-position-x': bgPosX,
                });
                $('#bgPosXValue').text(bgPosX);
            });
            $('#bgPosY').on('input', function () {
                const bgPosY = $('#bgPosY').val() + 'px';
                $('.container').css({
                    'background-position-y': bgPosY,
                });
                $('#bgPosYValue').text(bgPosY);
            });
            $('#bgSize').on('input', function () {
                const bgSize = $('#bgSize').val() + '%';
                $('.container').css({
                    'background-size': bgSize
                });
                $('#bgSizeValue').text(bgSize);
            });



            // Function to convert image to base64 data URL
            function convertImageToDataURL(url) {
                return fetch(url)
                    .then(response => response.blob())
                    .then(blob => new Promise((resolve, reject) => {
                        const reader = new FileReader();
                        reader.onloadend = () => resolve(reader.result);
                        reader.onerror = reject;
                        reader.readAsDataURL(blob);
                    }));
            }
            // Function to trigger download
            function downloadURI(uri, name) {
                const link = document.createElement('a');
                link.download = name;
                link.href = uri;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }


            function setImageBackground(url) {
                convertImageToDataURL(url).then(base64Image => {
                    const styleTag = $('<style>')
                        .html(`.invoice { background-image: url(${base64Image}) }`)
                        .appendTo('head');
                    // Event listener for download button click
                    $('#download').on('click', function () {
                        downloadURI(base64Image, 'Background-Image-2400x3600.jpg'); // Trigger download
                    });
                });
            }

            const originalUrl = 'https://picsum.photos/2400/3600';
            setImageBackground(originalUrl);

            $('#generateBackground').on('click', function () {
                setImageBackground(originalUrl);
            });
            let isBackgroundRemoved = false;

            $('#remove').on('click', function () {
                isBackgroundRemoved = !isBackgroundRemoved;
                $(this).toggleClass('color3 color2');
                if (isBackgroundRemoved) {
                    $('<style class="removeBackground">').html(`.invoice { background-image: none !important; }`).appendTo('head');
                } else {
                    $('.removeBackground').remove();
                }
            });

        });

    </script>
</body>

</html>
